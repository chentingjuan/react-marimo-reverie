(this["webpackJsonpreact-marimo-reverie"]=this["webpackJsonpreact-marimo-reverie"]||[]).push([[0],{17:function(e,t,s){e.exports={TransitionMatchHOC:"TransitionMatchHOC_TransitionMatchHOC__2_G2D"}},23:function(e,t,s){},31:function(e,t,s){"use strict";s.r(t);var i=s(2),r=s.n(i),n=s(6),o=s.n(n),a=s(4),c=(s(23),s(3)),l=s(1),u=function(){return Object(i.useEffect)((function(){c.a.to("#loading-wrapper",{opacity:0,duration:1,delay:0,pointerEvents:"none"})})),Object(l.jsx)("div",{id:"loading-wrapper",children:"Marimo R\xeaverie"})},p=s(13),h=s(18),d=s(5),m="END_TRANSITION",j=r.a.createContext({SPA:{isTransitionDone:!0,dispatchTransitionType:function(){}}});function b(e,t){switch(t.type){case"START_TRANSITION":case"END_TRANSITION":return Object.assign({},e,{isTransitionDone:!0});default:return e}}var f=function(e){var t=e.children,s=Object(i.useReducer)(b,{isTransitionDone:!0}),r=Object(a.a)(s,2),n=r[0],o=r[1];return Object(l.jsx)(j.Provider,{value:{SPA:n,dispatchTransitionType:o},children:t})},g=s(8),v=g.basepath,x=function(e){var t=e.children,s=e.to,i=Object(h.a)(e,["children","to"]),n=r.a.useContext(j).SPA;return Object(l.jsx)(d.a,Object(p.a)(Object(p.a)({},i),{},{to:v+s,style:{pointerEvents:n?"default":"none"},children:t}))},O=function(){return Object(l.jsx)("header",{children:Object(l.jsx)(x,{to:"/",children:"Marimo Reverie"})})},w=s.p+"static/media/sound-on.e2a611b6.svg",y=s.p+"static/media/question-mark.9224245e.svg",T=function(){return Object(l.jsxs)("footer",{children:[Object(l.jsx)(x,{to:"/about",children:"About"}),Object(l.jsx)(x,{to:"/rules",children:Object(l.jsx)("img",{src:y})}),Object(l.jsx)(x,{to:"/",children:Object(l.jsx)("img",{src:w})})]})},N=function(){return Object(l.jsxs)("section",{className:"section-page home",children:[Object(l.jsx)(O,{}),Object(l.jsx)(x,{to:"/game",className:"btn-hl",children:"Play Game"}),Object(l.jsx)(T,{})]})},C=s.p+"static/media/real-picture.57f4429d.png",k=function(){return Object(l.jsxs)("section",{className:"section-page about",children:[Object(l.jsx)("h1",{className:"title",children:"About"}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)("p",{children:"Marimo R\xeaverie is a web-browser game that connects to an actual marimo terrarium with sensors. The avatars of algae in cyberspace are constantly changing with their living environment in real time, floating around and competing with the player for generative nutrients in the browser window."}),Object(l.jsx)("img",{src:C,alt:"My Marimo"})]}),Object(l.jsx)("div",{className:"btn-wrapper",children:Object(l.jsx)(x,{to:"/",className:"btn btn-hl",children:"Got it"})})]})},M=function(){return Object(l.jsxs)("section",{className:"section-page rules",children:[Object(l.jsx)("h1",{className:"title",children:"The Rules"}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)("p",{children:"You will need to compete with the algae for the nutrients floating in the window. The more nutrients you get, the bigger you will become."}),Object(l.jsx)("p",{children:"When the marimos get enough nutrients, they will split. The nutrients points will be regenerated all the time, so the game will become more and more difficult. When the marimos touch the player, the nutrients will be taken away, and the player will become smaller. I will feed the nutrition powder based on the score received by marimos."})]}),Object(l.jsx)("div",{className:"btn-wrapper",children:Object(l.jsx)(x,{to:"/",className:"btn btn-hl",children:"Got it"})})]})},S=s(16),P=s.n(S),E=s(9),D=s(10);function _(e){var t,s,i=e.windowWidth,r=e.windowHeight,n="a2ca3d-81bc3f-5fad41-3e954b-2d8950-1c7c54-48af7e".split("-").map((function(e){return"#"+e})),o=[],a=10,c=[],l=5;e.myCustomRedrawAccordingToNewPropsHandler=function(e){s=e},e.setup=function(){e.createCanvas(i,r),e.noStroke(),a=Math.floor(i*r/9e4),l=Math.floor(i*r/9e4),setInterval((function(){s.started&&s.setTimer(s.timer+1)}),1e3),o=[];for(var m=0;m<a;m++)o.push(new u({position:d(),vector:e.constructor.Vector.random2D(),diameter:6*e.int(e.random(10,24)),color:n[Math.floor(e.random(n.length))]}));c=[];for(var j=0;j<l;j++)c.push(new p({position:d()}));t=new h},e.draw=function(){if(s.started){if(t.eateningTimer%10<5?e.background("#DEF0F7"):e.background("black"),e.frameCount%50===0){var i=d();c.push(new p({position:i}))}o.forEach((function(i){i.update(),i.draw(),i.chewing&&i.chewingTimer--,i.chewingTimer<=0&&(i.chewing=!1,i.chewingTimer=300),c.filter((function(e){return!e.eaten})).forEach((function(e){i.position.dist(e.position)<(i.diameter+e.diameter)/2&&(i.toSize(i.diameter+6),e.eaten=!0)})),t.diameter>6?!i.chewing&&i.position.dist(t.position)<(i.diameter+t.diameter)/2&&(i.toSize(i.diameter+6),i.chewing=!0,t.eatening=!0,t.toSize(t.diameter-6)):s.isGameOver(),i.diameter>168&&(i.toSize(90),o.push(new u({position:i.position.copy().add(20,0),vector:e.createVector(0,0),diameter:90,color:i.color})))})),c.filter((function(e){return!e.eaten})).forEach((function(e){e.draw(),t.position.dist(e.position)<(t.diameter+e.diameter)/2&&(t.toSize(t.diameter+6),e.eaten=!0)})),t.update(),t.draw(),t.eatening&&t.eateningTimer--,t.eateningTimer<=0&&(t.eatening=!1,t.eateningTimer=20),s.setNumOfMarimos(o.length)}};var u=function(){function t(e){Object(E.a)(this,t),this.position=e.position,this.vector=e.vector,this.diameter=e.diameter,this.color=e.color,this.chewing=!1,this.chewingTimer=300,this.dividing=!1,this.matrix=b(this.color,this.diameter)}return Object(D.a)(t,[{key:"draw",value:function(){f(this.matrix,this.position)}},{key:"update",value:function(){var t=this;this.position.add(this.vector),e.frameCount%900===0&&this.vector.mult(.9),(this.position.x<=0||this.position.x>i)&&(this.vector.x=-1.3*this.vector.x),(this.position.y<=0||this.position.y>r)&&(this.vector.y=-1.3*this.vector.y),o.forEach((function(e){if(t!==e&&(t.position.dist(e.position),t.diameter,e.diameter,t.position.dist(e.position)<(t.diameter+e.diameter)/2.1)){var s=e.position.copy().sub(t.position);t.vector.sub(s.mult(.2).setMag(1)),e.vector.add(s.mult(.2).setMag(1))}}));var s=2.4;this.vector.x>s&&(this.vector.x=s),this.vector.x<-2.4&&(this.vector.x=-2.4),this.vector.y>s&&(this.vector.y=s),this.vector.y<-2.4&&(this.vector.y=-2.4)}},{key:"toSize",value:function(e){this.diameter=e,this.matrix=b(this.color,this.diameter)}}]),t}(),p=function(){function e(t){Object(E.a)(this,e),this.position=t.position,this.diameter=4,this.color="#fff",this.eaten=!1,this.matrix=b(this.color,this.diameter)}return Object(D.a)(e,[{key:"draw",value:function(){f(this.matrix,this.position)}}]),e}(),h=function(){function t(s){Object(E.a)(this,t),this.position=e.createVector(0,0),this.diameter=18,this.color="#219EBC",this.eatening=!1,this.eateningTimer=20,this.matrix=b(this.color,this.diameter)}return Object(D.a)(t,[{key:"draw",value:function(){f(this.matrix,this.position)}},{key:"update",value:function(){var t=e.mouseX-this.position.x;this.position.x+=.01*t;var s=e.mouseY-this.position.y;this.position.y+=.01*s}},{key:"toSize",value:function(e){this.diameter=e,this.matrix=b(this.color,this.diameter)}}]),t}(),d=function(){return e.createVector(e.random(0,i),e.random(0,r))},m=function(e,t,s){return function(e,t){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}(e,t)<=s},j=function(e,t,s){return m(e,t,s)&&!(m(e+1,t,s)&&m(e-1,t,s)&&m(e,t+1,s)&&m(e,t-1,s)&&m(e+1,t+1,s)&&m(e+1,t-1,s)&&m(e-1,t-1,s)&&m(e-1,t+1,s))},b=function(t,s){for(var i,r=Math.ceil(s/6)/2,n=e.lerpColor(e.color("black"),e.color(t),.6),o=e.lerpColor(e.color("black"),e.color(t),.66),a=e.lerpColor(e.color("black"),e.color(t),.9),c=t,l=e.lerpColor(e.color("white"),e.color(t),.9),u=e.lerpColor(e.color("white"),e.color(t),.8),p=[],h=0,d=-(i=2*r%2===0?2*Math.ceil(r-.5)+1:2*Math.ceil(r))/2+1;d<=i/2-1;d++){p[h]=[];for(var b=-i/2+1;b<=i/2-1;b++)m(b,d,r)?!j(b,d,r)||j(b+(b>0?1:-1),d,r)&&j(b,d+(d>0?1:-1),r)?m(b+2,d+2,1)?p[h].push(u):m(b+2,d+2,r-7)?e.random()<.3?p[h].push(u):p[h].push(l):m(b+2,d+2,r-6)?p[h].push(l):m(b+2,d+2,r-4)?e.random()<.3?p[h].push(l):p[h].push(c):m(b+1,d+1,r-3)?p[h].push(c):m(b+1,d+1,r-2)?e.random()<.3?p[h].push(c):p[h].push(a):m(b+1,d+1,r-1)?p[h].push(a):p[h].push(o):p[h].push(n):p[h].push(null);h++}return p};function f(t,s){e.push(),e.translate(s.x,s.y);for(var i=0;i<t.length;i++)for(var r=0;r<t.length;r++)if(t[i][r]){var n=6*(r-t.length/2),o=6*(i-t.length/2);e.fill(t[i][r]),e.rect(n,o,6)}e.pop()}}var I={userName:"",setUserName:function(){},userColor:"",setUserColor:function(){},userPlayedTime:"",setUserPlayedTime:function(){}},A=Object(i.createContext)(I),R=function(){var e=Object(i.useState)(!1),t=Object(a.a)(e,2),s=t[0],r=t[1],n=Object(i.useState)(0),o=Object(a.a)(n,2),c=(o[0],o[1]),u=Object(i.useState)(null),p=Object(a.a)(u,2),h=p[0],m=p[1],j=Object(i.useContext)(A),b=j.userName,f=j.setUserName,g=(j.userColor,j.setUserColor,j.userPlayedTime,j.setUserPlayedTime);return Object(l.jsxs)("section",{className:"section-page game",children:[Object(l.jsx)("div",{className:"data-box",children:Object(l.jsxs)("p",{children:["Timer: ",h]})}),Object(l.jsx)(P.a,{sketch:_,started:s,setNumOfMarimos:c,timer:h,setTimer:m,isGameOver:function(){g(h),Object(d.c)("/the-end")}}),s?null:Object(l.jsx)("div",{className:"modal-wrapper",children:Object(l.jsxs)("div",{className:"modal",children:[Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)("label",{children:"Choose a color"}),Object(l.jsx)("input",{})]}),Object(l.jsxs)("div",{className:"form-row",children:[Object(l.jsx)("label",{children:"Enter your name"}),Object(l.jsx)("input",{defaultValue:b,onChange:function(e){return f(e.target.value)}})]}),Object(l.jsx)("a",{onClick:function(){return r(!0)},className:"btn-hl",children:"Ready"})]})})]})},U=function(){var e=Object(i.useContext)(A),t=(e.userName,e.setUserName,e.userColor,e.setUserColor,e.userPlayedTime);e.setUserPlayedTime;return Object(l.jsxs)("section",{className:"section-page the-end",children:[" ",Object(l.jsx)(O,{}),Object(l.jsx)("span",{children:t}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Game Over"}),Object(l.jsx)(x,{to:"/game",className:"btn-hl",children:"Try Again"})]}),Object(l.jsx)(T,{})]})},F=g.basepath,z=[{path:F+"/",Component:N},{path:F+"/about",Component:k},{path:F+"/rules",Component:M},{path:F+"/game",Component:R},{path:F+"/the-end",Component:U}],G=s(34),$=s(0),H=s(17),V=s.n(H),B=function(e){var t=e.children,s=e.path,i=r.a.useContext(j).dispatchTransitionType;return Object(l.jsx)(d.b,{path:s,children:function(e){var s=e.match;return Object(l.jsx)(G.a,{in:null!==s,appear:!0,mountOnEnter:!0,unmountOnExit:!0,addEndListener:function(e,t){null!==s?(console.log("in"),i({type:"START_TRANSITION"}),c.a.to(e,{duration:.3,opacity:1,delay:.3,ease:$.b.easeInOut,onComplete:function(){i({type:m})}})):(console.log("out"),c.a.to(e,{opacity:0,duration:.3,ease:$.b.easeInOut,onComplete:function(){i({type:m}),t()}}))},children:Object(l.jsx)("div",{id:"wrap",className:V.a.TransitionMatchHOC,children:r.a.cloneElement(t,s)})})}})};var J=function(){var e=Object(i.useState)(""),t=Object(a.a)(e,2),s=t[0],r=t[1],n=Object(i.useState)(""),o=Object(a.a)(n,2),c=o[0],p=o[1],h=Object(i.useState)(""),d=Object(a.a)(h,2),m=d[0],j=d[1],b=A.Provider,g={userName:s,setUserName:r,userColor:c,setUserColor:p,userPlayedTime:m,setUserPlayedTime:j};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(u,{}),Object(l.jsx)(b,{value:g,children:Object(l.jsx)(f,{children:z.map((function(e,t){var s=e.path,i=e.Component;return Object(l.jsx)(B,{path:s,children:Object(l.jsx)(i,{})},t+s)}))})})]})},L=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,35)).then((function(t){var s=t.getCLS,i=t.getFID,r=t.getFCP,n=t.getLCP,o=t.getTTFB;s(e),i(e),r(e),n(e),o(e)}))};o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(J,{})}),document.getElementById("root")),L()},8:function(e){e.exports=JSON.parse('{"name":"react-marimo-reverie","version":"0.1.0","private":true,"homepage":"http://chentingjuan.github.io/react-marimo-reverie","_homepage":"./","basepath":"/react-marimo-reverie","dependencies":{"@babel/core":"7.12.3","@pmmmwh/react-refresh-webpack-plugin":"0.4.3","@reach/router":"^1.3.4","@svgr/webpack":"5.5.0","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@typescript-eslint/eslint-plugin":"^4.5.0","@typescript-eslint/parser":"^4.5.0","babel-eslint":"^10.1.0","babel-jest":"^26.6.0","babel-loader":"8.1.0","babel-plugin-named-asset-import":"^0.3.7","babel-preset-react-app":"^10.0.0","bfj":"^7.0.2","camelcase":"^6.1.0","case-sensitive-paths-webpack-plugin":"2.3.0","css-loader":"4.3.0","dotenv":"8.2.0","dotenv-expand":"5.1.0","eslint":"^7.11.0","eslint-config-react-app":"^6.0.0","eslint-plugin-flowtype":"^5.2.0","eslint-plugin-import":"^2.22.1","eslint-plugin-jest":"^24.1.0","eslint-plugin-jsx-a11y":"^6.3.1","eslint-plugin-react":"^7.21.5","eslint-plugin-react-hooks":"^4.2.0","eslint-plugin-testing-library":"^3.9.2","eslint-webpack-plugin":"^2.5.2","file-loader":"6.1.1","fs-extra":"^9.0.1","gsap":"^3.6.1","html-webpack-plugin":"4.5.0","identity-obj-proxy":"3.0.0","jest":"26.6.0","jest-circus":"26.6.0","jest-resolve":"26.6.0","jest-watch-typeahead":"0.6.1","mini-css-extract-plugin":"0.11.3","node-sass":"^5.0.0","optimize-css-assets-webpack-plugin":"5.0.4","pnp-webpack-plugin":"1.6.4","postcss-flexbugs-fixes":"4.2.1","postcss-loader":"3.0.0","postcss-normalize":"8.0.1","postcss-preset-env":"6.7.0","postcss-safe-parser":"5.0.2","prompts":"2.4.0","react":"^17.0.2","react-app-polyfill":"^2.0.0","react-dev-utils":"^11.0.3","react-dom":"^17.0.2","react-p5-wrapper":"^2.4.0","react-refresh":"^0.8.3","react-transition-group":"^4.4.1","resolve":"1.18.1","resolve-url-loader":"^3.1.2","sass-loader":"^10.0.5","semver":"7.3.2","style-loader":"1.3.0","terser-webpack-plugin":"4.2.3","ts-pnp":"1.2.0","url-loader":"4.1.1","web-vitals":"^1.0.1","webpack":"4.44.2","webpack-dev-server":"3.11.1","webpack-manifest-plugin":"2.2.0","workbox-webpack-plugin":"5.1.4"},"scripts":{"start":"node scripts/start.js","build":"node scripts/build.js","test":"node scripts/test.js","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":["react-app","react-app/jest","plugin:react-pug/all"],"plugins":["react-pug"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"babel-plugin-transform-react-pug":"^7.0.1","eslint-plugin-react-pug":"^0.8.4","gh-pages":"^3.1.0"},"jest":{"roots":["<rootDir>/src"],"collectCoverageFrom":["src/**/*.{js,jsx,ts,tsx}","!src/**/*.d.ts"],"setupFiles":["react-app-polyfill/jsdom"],"setupFilesAfterEnv":["<rootDir>/src/setupTests.js"],"testMatch":["<rootDir>/src/**/__tests__/**/*.{js,jsx,ts,tsx}","<rootDir>/src/**/*.{spec,test}.{js,jsx,ts,tsx}"],"testEnvironment":"jsdom","testRunner":"/Users/juan/Projects/react-marimo-reverie/node_modules/jest-circus/runner.js","transform":{"^.+\\\\.(js|jsx|mjs|cjs|ts|tsx)$":"<rootDir>/config/jest/babelTransform.js","^.+\\\\.css$":"<rootDir>/config/jest/cssTransform.js","^(?!.*\\\\.(js|jsx|mjs|cjs|ts|tsx|css|json)$)":"<rootDir>/config/jest/fileTransform.js"},"transformIgnorePatterns":["[/\\\\\\\\]node_modules[/\\\\\\\\].+\\\\.(js|jsx|mjs|cjs|ts|tsx)$","^.+\\\\.module\\\\.(css|sass|scss)$"],"modulePaths":[],"moduleNameMapper":{"^react-native$":"react-native-web","^.+\\\\.module\\\\.(css|sass|scss)$":"identity-obj-proxy"},"moduleFileExtensions":["web.js","js","web.ts","ts","web.tsx","tsx","json","web.jsx","jsx","node"],"watchPlugins":["jest-watch-typeahead/filename","jest-watch-typeahead/testname"],"resetMocks":true},"babel":{"presets":["react-app"],"plugins":["transform-react-pug"]}}')}},[[31,1,2]]]);
//# sourceMappingURL=main.6b6f73fc.chunk.js.map