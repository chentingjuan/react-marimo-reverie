(this["webpackJsonpreact-marimo-reverie"]=this["webpackJsonpreact-marimo-reverie"]||[]).push([[0],{17:function(e,t,s){e.exports={TransitionMatchHOC:"TransitionMatchHOC_TransitionMatchHOC__2_G2D"}},23:function(e,t,s){},31:function(e,t,s){"use strict";s.r(t);var i=s(2),r=s.n(i),n=s(8),a=s.n(n),o=(s(23),s(3)),c=s(1),l=function(){return Object(i.useEffect)((function(){o.a.to("#loading-wrapper",{opacity:0,duration:1,delay:0,pointerEvents:"none"})})),Object(c.jsx)("div",{id:"loading-wrapper",children:"Marimo R\xeaverie"})},u=s(13),p=s(18),h=s(7),d=s(4),m="END_TRANSITION",j=r.a.createContext({SPA:{isTransitionDone:!0,dispatchTransitionType:function(){}}});function b(e,t){switch(t.type){case"START_TRANSITION":case"END_TRANSITION":return Object.assign({},e,{isTransitionDone:!0});default:return e}}var f=function(e){var t=e.children,s=Object(i.useReducer)(b,{isTransitionDone:!0}),r=Object(d.a)(s,2),n=r[0],a=r[1];return Object(c.jsx)(j.Provider,{value:{SPA:n,dispatchTransitionType:a},children:t})},g=s(6),v=g.basepath,x=function(e){var t=e.children,s=e.to,i=Object(p.a)(e,["children","to"]),n=r.a.useContext(j).SPA;return Object(c.jsx)(h.a,Object(u.a)(Object(u.a)({},i),{},{to:v+s,style:{pointerEvents:n?"default":"none"},children:t}))},O=s(5),w=s.n(O),y=s.p+"static/media/clock.53cecabe.svg",T=function(e){return Object(c.jsxs)("header",{className:e.mode,children:[Object(c.jsx)(x,{to:"/",children:"Marimo Reverie"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{src:y,alt:""}),Object(c.jsx)("span",{children:e.time})]})]})};T.propTypes={mode:w.a.string,time:w.a.number},T.defaultProps={mode:"normal",time:0};var N=T,C=s.p+"static/media/sound-on.e2a611b6.svg",k=s.p+"static/media/question-mark.9224245e.svg",S=function(){return Object(c.jsxs)("footer",{children:[Object(c.jsx)(x,{to:"/about",children:"About"}),Object(c.jsx)(x,{to:"/rules",children:Object(c.jsx)("img",{src:k})}),Object(c.jsx)(x,{to:"/",children:Object(c.jsx)("img",{src:C})})]})},M=function(){return Object(c.jsxs)("section",{className:"section-page home",children:[Object(c.jsx)(N,{}),Object(c.jsx)(x,{to:"/game",className:"btn-hl",children:"Play Game"}),Object(c.jsx)(S,{})]})},P=s.p+"static/media/real-picture.57f4429d.png",E=function(){return Object(c.jsxs)("section",{className:"section-page about",children:[Object(c.jsx)("h1",{className:"title",children:"About"}),Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("p",{children:"Marimo R\xeaverie is a web-browser game that connects to an actual marimo terrarium with sensors. The avatars of algae in cyberspace are constantly changing with their living environment in real time, floating around and competing with the player for generative nutrients in the browser window."}),Object(c.jsx)("img",{src:P,alt:"My Marimo"})]}),Object(c.jsx)("div",{className:"btn-wrapper",children:Object(c.jsx)(x,{to:"/",className:"btn btn-hl",children:"Got it"})})]})},D=function(){return Object(c.jsxs)("section",{className:"section-page rules",children:[Object(c.jsx)("h1",{className:"title",children:"The Rules"}),Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("p",{children:"You will need to compete with the algae for the nutrients floating in the window. The more nutrients you get, the bigger you will become."}),Object(c.jsx)("p",{children:"When the marimos get enough nutrients, they will split. The nutrients points will be regenerated all the time, so the game will become more and more difficult. When the marimos touch the player, the nutrients will be taken away, and the player will become smaller. I will feed the nutrition powder based on the score received by marimos."})]}),Object(c.jsx)("div",{className:"btn-wrapper",children:Object(c.jsx)(x,{to:"/",className:"btn btn-hl",children:"Got it"})})]})},I=s(16),_=s.n(I),A=s(10),R=s(11);function U(e){var t=e.windowWidth,s=e.windowHeight,i="a2ca3d-81bc3f-5fad41-3e954b-2d8950-1c7c54-48af7e".split("-").map((function(e){return"#"+e})),r=[],n=10,a=[],o=5,c=null,l={},u=null;e.myCustomRedrawAccordingToNewPropsHandler=function(e){l.started!==e.started&&e.started&&p(),l=e},e.setup=function(){e.createCanvas(t,s),e.noStroke(),n=Math.floor(t*s/9e4),o=Math.floor(t*s/9e4),r=[];for(var a=0;a<n;a++)r.push(new h({position:j(),vector:e.constructor.Vector.random2D(),diameter:6*e.int(e.random(10,24)),color:i[Math.floor(e.random(i.length))]}))};var p=function(){console.log("starttedd"),a=[];for(var e=0;e<o;e++)a.push(new d({position:j()}));c=new m,u=setInterval((function(){return l.setTimer(l.timer+1)}),1e3)};e.draw=function(){if(c&&c.eateningTimer%10>5?e.background("black"):e.background("#DEF0F7"),c&&e.frameCount%50===0){var t=j();a.push(new d({position:t}))}r.forEach((function(t){t.update(),t.draw(),t.chewing&&t.chewingTimer--,t.chewingTimer<=0&&(t.chewing=!1,t.chewingTimer=300),a.filter((function(e){return!e.eaten})).forEach((function(e){t.position.dist(e.position)<(t.diameter+e.diameter)/2&&(t.toSize(t.diameter+6),e.eaten=!0)})),c&&(c.diameter>6?!t.chewing&&t.position.dist(c.position)<(t.diameter+c.diameter)/2&&(t.toSize(t.diameter+6),t.chewing=!0,c.eatening=!0,c.toSize(c.diameter-6)):(clearInterval(u),l.isGameOver())),t.diameter>168&&(t.toSize(90),r.push(new h({position:t.position.copy().add(20,0),vector:e.createVector(0,0),diameter:90,color:t.color})))})),a.filter((function(e){return!e.eaten})).forEach((function(e){e.draw(),c.position.dist(e.position)<(c.diameter+e.diameter)/2&&(c.toSize(c.diameter+6),e.eaten=!0)})),c&&(c.update(),c.draw(),c.eatening&&c.eateningTimer--,c.eateningTimer<=0&&(c.eatening=!1,c.eateningTimer=20))};var h=function(){function i(e){Object(A.a)(this,i),this.position=e.position,this.vector=e.vector,this.diameter=e.diameter,this.color=e.color,this.chewing=!1,this.chewingTimer=300,this.dividing=!1,this.matrix=g(this.color,this.diameter)}return Object(R.a)(i,[{key:"draw",value:function(){v(this.matrix,this.position)}},{key:"update",value:function(){var i=this;this.position.add(this.vector),e.frameCount%900===0&&this.vector.mult(.9),(this.position.x<=0||this.position.x>t)&&(this.vector.x=-1.3*this.vector.x),(this.position.y<=0||this.position.y>s)&&(this.vector.y=-1.3*this.vector.y),r.forEach((function(e){if(i!==e&&(i.position.dist(e.position),i.diameter,e.diameter,i.position.dist(e.position)<(i.diameter+e.diameter)/2.1)){var t=e.position.copy().sub(i.position);i.vector.sub(t.mult(.2).setMag(1)),e.vector.add(t.mult(.2).setMag(1))}}));var n=2.4;this.vector.x>n&&(this.vector.x=n),this.vector.x<-2.4&&(this.vector.x=-2.4),this.vector.y>n&&(this.vector.y=n),this.vector.y<-2.4&&(this.vector.y=-2.4)}},{key:"toSize",value:function(e){this.diameter=e,this.matrix=g(this.color,this.diameter)}}]),i}(),d=function(){function e(t){Object(A.a)(this,e),this.position=t.position,this.diameter=4,this.color="#fff",this.eaten=!1,this.matrix=g(this.color,this.diameter)}return Object(R.a)(e,[{key:"draw",value:function(){v(this.matrix,this.position)}}]),e}(),m=function(){function t(s){Object(A.a)(this,t),this.position=e.createVector(0,0),this.diameter=18,this.color="#219EBC",this.eatening=!1,this.eateningTimer=20,this.matrix=g(this.color,this.diameter)}return Object(R.a)(t,[{key:"draw",value:function(){v(this.matrix,this.position)}},{key:"update",value:function(){var t=e.mouseX-this.position.x;this.position.x+=.01*t;var s=e.mouseY-this.position.y;this.position.y+=.01*s}},{key:"toSize",value:function(e){this.diameter=e,this.matrix=g(this.color,this.diameter)}}]),t}(),j=function(){return e.createVector(e.random(0,t),e.random(0,s))},b=function(e,t,s){return function(e,t){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}(e,t)<=s},f=function(e,t,s){return b(e,t,s)&&!(b(e+1,t,s)&&b(e-1,t,s)&&b(e,t+1,s)&&b(e,t-1,s)&&b(e+1,t+1,s)&&b(e+1,t-1,s)&&b(e-1,t-1,s)&&b(e-1,t+1,s))},g=function(t,s){for(var i=Math.ceil(s/6)/2,r=e.lerpColor(e.color("black"),e.color(t),.6),n=e.lerpColor(e.color("black"),e.color(t),.66),a=e.lerpColor(e.color("black"),e.color(t),.9),o=t,c=e.lerpColor(e.color("white"),e.color(t),.9),l=e.lerpColor(e.color("white"),e.color(t),.8),u=2*i%2===0?2*Math.ceil(i-.5)+1:2*Math.ceil(i),p=[],h=0,d=-u/2+1;d<=u/2-1;d++){p[h]=[];for(var m=-u/2+1;m<=u/2-1;m++)b(m,d,i)?!f(m,d,i)||f(m+(m>0?1:-1),d,i)&&f(m,d+(d>0?1:-1),i)?b(m+2,d+2,1)?p[h].push(l):b(m+2,d+2,i-7)?e.random()<.3?p[h].push(l):p[h].push(c):b(m+2,d+2,i-6)?p[h].push(c):b(m+2,d+2,i-4)?e.random()<.3?p[h].push(c):p[h].push(o):b(m+1,d+1,i-3)?p[h].push(o):b(m+1,d+1,i-2)?e.random()<.3?p[h].push(o):p[h].push(a):b(m+1,d+1,i-1)?p[h].push(a):p[h].push(n):p[h].push(r):p[h].push(null);h++}return p},v=function(t,s){e.push(),e.translate(s.x,s.y);for(var i=0;i<t.length;i++)for(var r=0;r<t.length;r++)if(t[i][r]){var n=6*(r-t.length/2),a=6*(i-t.length/2);e.fill(t[i][r]),e.rect(n,a,6)}e.pop()}}var F={userName:"",setUserName:function(){},userColor:"",setUserColor:function(){},userPlayedTime:"",setUserPlayedTime:function(){}},z=Object(i.createContext)(F),G=function(e){var t=e.children,s=Object(i.useState)(""),r=Object(d.a)(s,2),n=r[0],a=r[1],o=Object(i.useState)(""),l=Object(d.a)(o,2),u=l[0],p=l[1],h=Object(i.useState)(""),m=Object(d.a)(h,2),j={userName:n,setUserName:a,userColor:u,setUserColor:p,userPlayedTime:m[0],setUserPlayedTime:m[1]};return Object(c.jsx)(z.Provider,{value:j,children:t})},$=function(){var e=Object(i.useState)(!1),t=Object(d.a)(e,2),s=t[0],r=t[1],n=Object(i.useState)(0),a=Object(d.a)(n,2),o=(a[0],a[1]),l=Object(i.useState)(null),u=Object(d.a)(l,2),p=u[0],m=u[1],j=Object(i.useContext)(z),b=j.userName,f=j.setUserName,v=(j.userColor,j.setUserColor,j.userPlayedTime,j.setUserPlayedTime);return Object(c.jsxs)("section",{className:"section-page game",children:[Object(c.jsx)("div",{className:"data-box",children:Object(c.jsxs)("p",{children:["Timer: ",p]})}),Object(c.jsx)(_.a,{sketch:U,started:s,setNumOfMarimos:o,timer:p,setTimer:m,isGameOver:function(){v(p),Object(h.c)(g.basepath+"/the-end")}}),s?null:Object(c.jsx)("div",{className:"modal-wrapper",children:Object(c.jsxs)("div",{className:"modal",children:[Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsx)("label",{children:"Choose a color"}),Object(c.jsx)("input",{})]}),Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsx)("label",{children:"Enter your name"}),Object(c.jsx)("input",{defaultValue:b,onChange:function(e){return f(e.target.value)}})]}),Object(c.jsx)("div",{className:"btn-wrapper",children:Object(c.jsx)("a",{onClick:function(){return r(!0)},className:"btn-hl",children:"Ready"})})]})})]})},H=function(){var e=Object(i.useContext)(z),t=(e.userName,e.setUserName,e.userColor,e.setUserColor,e.userPlayedTime);e.setUserPlayedTime;return Object(c.jsxs)("section",{className:"section-page the-end",children:[" ",Object(c.jsx)(N,{displayLogo:!1,time:t}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Game Over"}),Object(c.jsx)(x,{to:"/game",className:"btn-hl",children:"Try Again"})]}),Object(c.jsx)(S,{})]})},V=g.basepath,L=[{path:V+"/",Component:M},{path:V+"/about",Component:E},{path:V+"/rules",Component:D},{path:V+"/game",Component:$},{path:V+"/the-end",Component:H}],B=s(34),J=s(0),W=s(17),q=s.n(W),Y=function(e){var t=e.children,s=e.path,i=r.a.useContext(j).dispatchTransitionType;return Object(c.jsx)(h.b,{path:s,children:function(e){var s=e.match;return Object(c.jsx)(B.a,{in:null!==s,appear:!0,mountOnEnter:!0,unmountOnExit:!0,addEndListener:function(e,t){null!==s?(console.log("in"),i({type:"START_TRANSITION"}),o.a.to(e,{duration:.3,opacity:1,delay:.3,ease:J.b.easeInOut,onComplete:function(){i({type:m})}})):(console.log("out"),o.a.to(e,{opacity:0,duration:.3,ease:J.b.easeInOut,onComplete:function(){i({type:m}),t()}}))},children:Object(c.jsx)("div",{id:"wrap",className:q.a.TransitionMatchHOC,children:r.a.cloneElement(t,s)})})}})};var X=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(l,{}),Object(c.jsx)(G,{children:Object(c.jsx)(f,{children:L.map((function(e,t){var s=e.path,i=e.Component;return Object(c.jsx)(Y,{path:s,children:Object(c.jsx)(i,{})},t+s)}))})})]})},K=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,35)).then((function(t){var s=t.getCLS,i=t.getFID,r=t.getFCP,n=t.getLCP,a=t.getTTFB;s(e),i(e),r(e),n(e),a(e)}))};a.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(X,{})}),document.getElementById("root")),K()},6:function(e){e.exports=JSON.parse('{"name":"react-marimo-reverie","version":"0.1.0","private":true,"homepage":"http://chentingjuan.github.io/react-marimo-reverie","_homepage":"./","basepath":"/react-marimo-reverie","dependencies":{"@babel/core":"7.12.3","@pmmmwh/react-refresh-webpack-plugin":"0.4.3","@reach/router":"^1.3.4","@svgr/webpack":"5.5.0","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@typescript-eslint/eslint-plugin":"^4.5.0","@typescript-eslint/parser":"^4.5.0","babel-eslint":"^10.1.0","babel-jest":"^26.6.0","babel-loader":"8.1.0","babel-plugin-named-asset-import":"^0.3.7","babel-preset-react-app":"^10.0.0","bfj":"^7.0.2","camelcase":"^6.1.0","case-sensitive-paths-webpack-plugin":"2.3.0","css-loader":"4.3.0","dotenv":"8.2.0","dotenv-expand":"5.1.0","eslint":"^7.11.0","eslint-config-react-app":"^6.0.0","eslint-plugin-flowtype":"^5.2.0","eslint-plugin-import":"^2.22.1","eslint-plugin-jest":"^24.1.0","eslint-plugin-jsx-a11y":"^6.3.1","eslint-plugin-react":"^7.21.5","eslint-plugin-react-hooks":"^4.2.0","eslint-plugin-testing-library":"^3.9.2","eslint-webpack-plugin":"^2.5.2","file-loader":"6.1.1","fs-extra":"^9.0.1","gsap":"^3.6.1","html-webpack-plugin":"4.5.0","identity-obj-proxy":"3.0.0","jest":"26.6.0","jest-circus":"26.6.0","jest-resolve":"26.6.0","jest-watch-typeahead":"0.6.1","mini-css-extract-plugin":"0.11.3","node-sass":"^5.0.0","optimize-css-assets-webpack-plugin":"5.0.4","pnp-webpack-plugin":"1.6.4","postcss-flexbugs-fixes":"4.2.1","postcss-loader":"3.0.0","postcss-normalize":"8.0.1","postcss-preset-env":"6.7.0","postcss-safe-parser":"5.0.2","prompts":"2.4.0","react":"^17.0.2","react-app-polyfill":"^2.0.0","react-dev-utils":"^11.0.3","react-dom":"^17.0.2","react-p5-wrapper":"^2.4.0","react-refresh":"^0.8.3","react-transition-group":"^4.4.1","resolve":"1.18.1","resolve-url-loader":"^3.1.2","sass-loader":"^10.0.5","semver":"7.3.2","style-loader":"1.3.0","terser-webpack-plugin":"4.2.3","ts-pnp":"1.2.0","url-loader":"4.1.1","web-vitals":"^1.0.1","webpack":"4.44.2","webpack-dev-server":"3.11.1","webpack-manifest-plugin":"2.2.0","workbox-webpack-plugin":"5.1.4"},"scripts":{"start":"node scripts/start.js","build":"node scripts/build.js","test":"node scripts/test.js","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":["react-app","react-app/jest","plugin:react-pug/all"],"plugins":["react-pug"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"babel-plugin-transform-react-pug":"^7.0.1","eslint-plugin-react-pug":"^0.8.4","gh-pages":"^3.1.0"},"jest":{"roots":["<rootDir>/src"],"collectCoverageFrom":["src/**/*.{js,jsx,ts,tsx}","!src/**/*.d.ts"],"setupFiles":["react-app-polyfill/jsdom"],"setupFilesAfterEnv":["<rootDir>/src/setupTests.js"],"testMatch":["<rootDir>/src/**/__tests__/**/*.{js,jsx,ts,tsx}","<rootDir>/src/**/*.{spec,test}.{js,jsx,ts,tsx}"],"testEnvironment":"jsdom","testRunner":"/Users/juan/Projects/react-marimo-reverie/node_modules/jest-circus/runner.js","transform":{"^.+\\\\.(js|jsx|mjs|cjs|ts|tsx)$":"<rootDir>/config/jest/babelTransform.js","^.+\\\\.css$":"<rootDir>/config/jest/cssTransform.js","^(?!.*\\\\.(js|jsx|mjs|cjs|ts|tsx|css|json)$)":"<rootDir>/config/jest/fileTransform.js"},"transformIgnorePatterns":["[/\\\\\\\\]node_modules[/\\\\\\\\].+\\\\.(js|jsx|mjs|cjs|ts|tsx)$","^.+\\\\.module\\\\.(css|sass|scss)$"],"modulePaths":[],"moduleNameMapper":{"^react-native$":"react-native-web","^.+\\\\.module\\\\.(css|sass|scss)$":"identity-obj-proxy"},"moduleFileExtensions":["web.js","js","web.ts","ts","web.tsx","tsx","json","web.jsx","jsx","node"],"watchPlugins":["jest-watch-typeahead/filename","jest-watch-typeahead/testname"],"resetMocks":true},"babel":{"presets":["react-app"],"plugins":["transform-react-pug"]}}')}},[[31,1,2]]]);
//# sourceMappingURL=main.b68a9852.chunk.js.map