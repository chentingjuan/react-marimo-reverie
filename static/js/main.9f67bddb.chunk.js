(this["webpackJsonpreact-marimo-reverie"]=this["webpackJsonpreact-marimo-reverie"]||[]).push([[0],{12:function(t,o,n){},13:function(t,o,n){},17:function(t,o,n){"use strict";n.r(o);var i=n(1),r=n.n(i),e=n(5),a=n.n(e),s=(n(12),n(7)),c=(n(13),n(6)),u=n.n(c),d=n(2),v=n(3);function h(t){var o,n,i,r=t.windowWidth,e=t.windowHeight,a=t.WEBGL,s="a2ca3d-81bc3f-5fad41-3e954b-2d8950-1c7c54-48af7e".split("-").map((function(t){return"#"+t})),c=[],u=10,h=[],f=5,l=[],m="#219EBC";t.myCustomRedrawAccordingToNewPropsHandler=function(t){i=t},t.setup=function(){t.createCanvas(r,e,a),u=Math.floor(r*e/9e4),f=Math.floor(r*e/9e4);var i=t.max(r,e);t.ortho(-r/2,r/2,-e/2,e/2,2*-i,2.5*i),t.noStroke(),n=t.createShader("\n\n    precision highp float;\n    \n    // attributes, in\n    attribute vec3 aPosition;\n    attribute vec3 aNormal;\n    attribute vec2 aTexCoord;\n\n    // attributes, out\n    varying vec3 var_vertPos;\n    varying vec3 var_vertNormal;\n    varying vec2 var_vertTexCoord;\n    \n    // matrices\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n    uniform mat3 uNormalMatrix;\n\n    void main() {\n      vec3 pos = aPosition;  \n      gl_Position = uProjectionMatrix * uModelViewMatrix * vec4(pos, 1.0);\n\n      // set out value\n      var_vertPos      = pos;\n      var_vertNormal   =  aNormal;\n      var_vertTexCoord = aTexCoord;\n    }\n","\n\nprecision highp float;\n#define PI 3.14159265359\n\n\nuniform vec2 u_resolution;\nuniform vec2 u_mouse;\nuniform mat3 uNormalMatrix;\nuniform vec3 u_lightDir;\nuniform vec3 u_col;\n\n//attributes, in\nvarying vec3 var_vertPos;\nvarying vec2 var_vertTexCoord;\nvarying vec3 var_vertNormal;\n\n\nfloat gridGra(in vec2 uv , float gridNum){\n    float scale = gridNum;\n    uv *= scale;\n    uv = fract(uv);\n    float o = abs(uv.y + -0.5)*2.;\n\t\to *= abs(uv.x + -0.5)*2.;\n    return o;\n}\n\nfloat random (in vec2 st) {\n\t\t//return fract(sin(dot(co.xy,vec2(12.9898,78.233))) * 43758.5453);// < - not work on mobile\n   \thighp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(st.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\nfloat noise(vec2 st) {\n    vec2 i = vec2(0.);\n\t\ti = floor(st);\n    vec2 f = vec2(0.);\n\t\tf = fract(st);\n    vec2 u =  vec2(0.);\n\t\tu = f*f*(3.0-2.0*f);\n    return mix( mix( random( i + vec2(0.0,0.0) ),\n                     random( i + vec2(1.0,0.0) ), u.x),\n                mix( random( i + vec2(0.0,1.0) ),\n                     random( i + vec2(1.0,1.0) ), u.x), u.y);\n}\n\nvoid main(){\n\t\tvec2 st = gl_FragCoord.xy/u_resolution.x;\n\t\tfloat g = gridGra(st,u_resolution.x/20.);\n\t\tfloat noise = 1.- random(st);\n\t\tfloat noise2 = random(st  + vec2(100.,0));\n\n\t\tvec3 vertNormal = normalize(uNormalMatrix * var_vertNormal);\n    float dot = dot(vertNormal,-normalize(u_lightDir));\n    dot = (dot *.5) + .5;\n\t\t\n    float tone = step(noise,dot*1.2);\n\t\tvec3 col = u_col * tone + (u_col-0.3) * (1.-tone);\n\t\tcol += noise2*.15;\n\n    gl_FragColor = vec4(col,1.0);\n}\n\n"),t.shader(n),n.setUniform("u_resolution",[r,e]),n.setUniform("u_lightDir",[1,1,-1]),c=[];for(var d=0;d<u;d++)c.push(new p({position:t.createVector(t.random(-r/2,r/2),t.random(-e/2,e/2)),vector:t.constructor.Vector.random2D(),radius:t.random(50,80),color:s[Math.floor(t.random(s.length))]}));h=[];for(var v=0;v<f;v++)h.push(new g({position:t.createVector(t.random(-r/2,r/2),t.random(-e/2,e/2))}));o=new x},t.draw=function(){if(t.background("#DEF0F7"),t.frameCount%50===0){var n=t.createVector(t.random(-r/2,r/2),t.random(-e/2,e/2));h.push(new g({position:n}))}c.forEach((function(n){if(n.update(),n.draw(),n.chewing&&n.chewingTimer--,n.chewingTimer<=0&&(n.chewing=!1,n.chewingTimer=300),h.filter((function(t){return!t.eaten})).forEach((function(t){n.position.dist(t.position)<(n.radius+t.radius)/1&&(n.radius+=1,t.eaten=!0)})),o.radius>1&&!n.chewing&&n.position.dist(o.position)<(n.radius+o.radius)/1&&(n.radius+=1,n.chewing=!0,o.radius-=2),n.radius>80&&(n.radius=50,n.position.sub(10,0),c.push(new p({position:n.position.copy().add(20,0),vector:t.createVector(0,0),radius:50,color:n.color}))),t.random()<.02){var i=t.random(-n.radius,n.radius);l.push({p:n.position.copy().add(i),v:t.createVector(0,t.random(-.5,-5)),r:t.random(1,6),opacity:t.random(.1,500)})}})),h.filter((function(t){return!t.eaten})).forEach((function(t){t.draw(),o.position.dist(t.position)<(o.radius+t.radius)/1&&(o.radius+=2,t.eaten=!0)})),l.forEach((function(o){b(t.color(255),t.createVector(o.p.x+t.noise(o.p.y/20)*o.r*2,o.p.y,100),o.r),o.p.y+=o.v.y})),l=l.filter((function(t){return t.p.y>-e/2})),o.update(),o.draw(),i.setNumOfMarimos(c.length)};var p=function(){function o(t){Object(d.a)(this,o),this.position=t.position,this.vector=t.vector,this.radius=t.radius,this.color=t.color,this.chewing=!1,this.chewingTimer=300}return Object(v.a)(o,[{key:"draw",value:function(){b(this.chewing?m:this.color,this.position,this.radius)}},{key:"update",value:function(){var o=this;this.position.add(this.vector),t.frameCount%900===0&&this.vector.mult(.9),t.abs(this.position.x)>r/2&&(this.vector.x=-1.3*this.vector.x),t.abs(this.position.y)>e/2&&(this.vector.y=-1.3*this.vector.y),c.forEach((function(t){if(o!==t&&(o.position.dist(t.position),o.radius,t.radius,o.position.dist(t.position)<(o.radius+t.radius)/1.2)){var n=t.position.copy().sub(o.position);o.vector.sub(n.mult(.2).setMag(1)),t.vector.add(n.mult(.2).setMag(1))}}));var n=2.4;this.vector.x>n&&(this.vector.x=n),this.vector.x<-2.4&&(this.vector.x=-2.4),this.vector.y>n&&(this.vector.y=n),this.vector.y<-2.4&&(this.vector.y=-2.4)}}]),o}(),g=function(){function o(t){Object(d.a)(this,o),this.position=t.position,this.radius=5,this.eaten=!1}return Object(v.a)(o,[{key:"draw",value:function(){b("#6B705C",this.position,this.radius)}},{key:"updatePosition",value:function(){this.position.set(t.random(-r/2,r/2),t.random(-e/2,e/2))}}]),o}(),x=function(){function o(n){Object(d.a)(this,o),this.position=t.createVector(-r/2,-e/2),this.radius=9,this.eatenable=!0}return Object(v.a)(o,[{key:"draw",value:function(){b(m,this.position,this.radius)}},{key:"update",value:function(){var o=t.mouseX-r/2-this.position.x;this.position.x+=.01*o;var n=t.mouseY-e/2-this.position.y;this.position.y+=.01*n}}]),o}();function b(o,i,r){t.push(),function(o,n,i){var r=t.color(i)._array;r.pop(),o.setUniform(n,r)}(n,"u_col",o),t.translate(i),t.sphere(r),t.pop()}}var f=n(0);var l=function(){var t=Object(i.useState)(0),o=Object(s.a)(t,2),n=o[0],r=o[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"data-box",children:["Number of Marimos: ",n]}),Object(f.jsx)(u.a,{sketch:h,setNumOfMarimos:r})]})},m=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(o){var n=o.getCLS,i=o.getFID,r=o.getFCP,e=o.getLCP,a=o.getTTFB;n(t),i(t),r(t),e(t),a(t)}))};a.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(l,{})}),document.getElementById("root")),m()}},[[17,1,2]]]);
//# sourceMappingURL=main.9f67bddb.chunk.js.map