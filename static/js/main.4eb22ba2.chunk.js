(this["webpackJsonpreact-marimo-reverie"]=this["webpackJsonpreact-marimo-reverie"]||[]).push([[0],{19:function(e,t,s){e.exports={TransitionMatchHOC:"TransitionMatchHOC_TransitionMatchHOC__2_G2D"}},26:function(e,t,s){},34:function(e,t,s){"use strict";s.r(t);var r=s(2),i=s.n(r),n=s(8),a=s.n(n),o=(s(26),s(3)),c=s(0),l=function(){return Object(r.useEffect)((function(){o.a.to("#loading-wrapper",{duration:1,delay:3,opacity:0,pointerEvents:"none"}),o.a.to(".loader",{duration:1,delay:2,opacity:0})}),[]),Object(c.jsx)("div",{id:"loading-wrapper",children:Object(c.jsxs)("div",{className:"loader",children:[Object(c.jsx)("span",{children:"M"}),Object(c.jsx)("span",{children:"a"}),Object(c.jsx)("span",{children:"r"}),Object(c.jsx)("span",{children:"i"}),Object(c.jsx)("span",{children:"m"}),Object(c.jsx)("span",{children:"o"}),Object(c.jsx)("span",{children:"_"}),Object(c.jsx)("span",{children:"R"}),Object(c.jsx)("span",{children:"\xea"}),Object(c.jsx)("span",{children:"v"}),Object(c.jsx)("span",{children:"e"}),Object(c.jsx)("span",{children:"r"}),Object(c.jsx)("span",{children:"i"}),Object(c.jsx)("span",{children:"e"})]})})},u=s(16),h=s(21),d=s(4),p=s(5),m="END_TRANSITION",j=i.a.createContext({SPA:{isTransitionDone:!0,dispatchTransitionType:function(){}}});function b(e,t){switch(t.type){case"START_TRANSITION":case"END_TRANSITION":return Object.assign({},e,{isTransitionDone:!0});default:return e}}var f=function(e){var t=e.children,s=Object(r.useReducer)(b,{isTransitionDone:!0}),i=Object(p.a)(s,2),n=i[0],a=i[1];return Object(c.jsx)(j.Provider,{value:{SPA:n,dispatchTransitionType:a},children:t})},v=s(7),x=v.basepath,O=function(e){var t=e.children,s=e.to,r=Object(h.a)(e,["children","to"]),n=i.a.useContext(j).SPA,a=Object(d.d)();return Object(c.jsx)(d.a,Object(u.a)(Object(u.a)({},r),{},{to:x+s,state:{prevPath:a.pathname},style:{pointerEvents:n?"default":"none"},children:t}))},g=s(6),w=s.n(g),y=s.p+"static/media/clock.53cecabe.svg",C=function(e){var t=Math.floor(e/3600)%60,s=Math.floor(e/60)%60,r=e%60;return"".concat(t<10?"0".concat(t):t,":").concat(s<10?"0".concat(s):s,":").concat(r<10?"0".concat(r):r)},N=function(e){return Object(c.jsxs)("header",{className:e.mode,children:[Object(c.jsxs)(O,{to:"/",className:"logo",children:[" ",Object(c.jsx)("span",{children:"Marimo"}),Object(c.jsx)("span",{children:"R\xeaverie"})]}),-1!==e.time?Object(c.jsxs)("div",{className:"time",children:[Object(c.jsx)("img",{src:y,alt:""}),Object(c.jsx)("span",{children:C(e.time)})]}):null]})};N.propTypes={mode:w.a.string,time:w.a.number},N.defaultProps={mode:"normal",time:-1};var T=N,k=s.p+"static/media/sound-on.e2a611b6.svg",P=s.p+"static/media/question-mark.9224245e.svg",S=function(){return Object(c.jsxs)("footer",{children:[Object(c.jsx)(O,{to:"/about",children:"About"}),Object(c.jsx)(O,{to:"/rules",children:Object(c.jsx)("img",{src:P})}),Object(c.jsx)(O,{to:"/",children:Object(c.jsx)("img",{src:k})})]})},M=function(){return Object(c.jsxs)("section",{className:"section-page home",children:[Object(c.jsx)(T,{}),Object(c.jsx)(O,{to:"/game",className:"btn btn-hl",children:"Play Game"}),Object(c.jsx)(S,{})]})},E=s.p+"static/media/real-picture.57f4429d.png",D=function(){var e=Object(d.d)();return Object(c.jsxs)("section",{className:"section-page about",children:[Object(c.jsx)("h1",{className:"title",children:"About"}),Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("p",{children:"Marimo R\xeaverie is a web-browser game that connects to an actual marimo terrarium with sensors. The avatars of algae in cyberspace are constantly changing with their living environment in real time, floating around and competing with the player for generative nutrients in the browser window."}),Object(c.jsx)("img",{src:E,alt:"My Marimo"})]}),Object(c.jsx)("div",{className:"btn-wrapper",children:e.state?Object(c.jsx)("a",{onClick:function(){return Object(d.c)(-1)},className:"btn btn-hl",children:"Got it"}):Object(c.jsx)(O,{to:"/",className:"btn btn-hl",children:"Got it"})})]})},I=function(){var e=Object(d.d)();return Object(c.jsxs)("section",{className:"section-page rules",children:[Object(c.jsx)("h1",{className:"title",children:"The Rules"}),Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("p",{children:"You will need to compete with the algae for the nutrients floating in the window. The more nutrients you get, the bigger you will become."}),Object(c.jsx)("p",{children:"When the marimos get enough nutrients, they will split. The nutrients points will be regenerated all the time, so the game will become more and more difficult. When the marimos touch the player, the nutrients will be taken away, and the player will become smaller. I will feed the nutrition powder based on the score received by marimos."})]}),Object(c.jsx)("div",{className:"btn-wrapper",children:e.state?Object(c.jsx)("a",{onClick:function(){return Object(d.c)(-1)},className:"btn btn-hl",children:"Got it"}):Object(c.jsx)(O,{to:"/",className:"btn btn-hl",children:"Got it"})})]})},U=s(12),_=s.n(U),A=s(20),R=s(13),F=s(14);function z(e){var t=e.windowWidth,s=e.windowHeight,r="a2ca3d-81bc3f-5fad41-3e954b-2d8950-1c7c54-48af7e".split("-").map((function(e){return"#"+e})),i=[],n=10,a=[],o=5,c=50,l=null,u={},h=null,d=null,p=3,m=!1;e.myCustomRedrawAccordingToNewPropsHandler=function(e){u.clickedStart!==e.clickedStart&&e.clickedStart&&j(),u=e},e.setup=function(){e.createCanvas(t,s),e.noStroke();var a=t*s;n=Math.floor(a/9e4),o=Math.floor(a/9e4),c=Math.floor(4e7/a),i=[];for(var u=0;u<n;u++)i.push(new b({position:x(),vector:e.constructor.Vector.random2D(),diameter:6*e.int(e.random(10,24)),color:r[Math.floor(e.random(r.length))]}));l=new v};var j=function(){console.log("starttedd"),p=3,d=setInterval((function(){if(p>1)p--;else{clearInterval(d),a=[];for(var e=0;e<o;e++)a.push(new f({position:x()}));h=setInterval((function(){u.setTime(u.time+1)}),1e3/60),m=!0}}),1e3)};e.draw=function(){if(m&&l.eateningTimer%10>5?e.background("black"):e.background("#DEF0F7"),m&&e.frameCount%c===0){var r=x();a.push(new f({position:r}))}i.forEach((function(t){if(t.update(),t.draw(),a.filter((function(e){return!e.eaten})).forEach((function(e){t.position.dist(e.position)<(t.diameter+e.diameter)/2&&(t.toSize(t.diameter+6),e.eaten=!0)})),m)if(l.diameter>6){if(t.position.dist(l.position)<(t.diameter+l.diameter)/2){t.toSize(t.diameter+6),l.eatening=!0,l.toSize(l.diameter-6);var s=t.position.copy().sub(l.position);l.acceleration.sub(s.mult(10)),t.vector.add(s.mult(.1).setMag(1))}}else clearInterval(h),u.isGameOver();t.diameter>168&&(t.toSize(90),i.push(new b({position:t.position.copy().add(20,0),vector:e.createVector(0,0),diameter:90,color:t.color})))})),a.filter((function(e){return!e.eaten})).forEach((function(e){e.draw(),l.position.dist(e.position)<(l.diameter+e.diameter)/2&&(l.toSize(l.diameter+6),e.eaten=!0)})),l.update(),l.draw(),l.eatening&&l.eateningTimer--,l.eateningTimer<=0&&(l.eatening=!1,l.eateningTimer=25),m||(e.push(),e.textSize(100),e.text(p,t/2,s/2),e.pop())};var b=function(){function r(e){Object(R.a)(this,r),this.position=e.position,this.vector=e.vector,this.diameter=e.diameter,this.color=e.color,this.dividing=!1,this.matrix=w(this.color,this.diameter)}return Object(F.a)(r,[{key:"draw",value:function(){y(this.matrix,this.position)}},{key:"update",value:function(){var r=this;this.position.add(this.vector),e.frameCount%900===0&&this.vector.mult(.9),(this.position.x<=0||this.position.x>t)&&(this.vector.x=-1.3*this.vector.x),(this.position.y<=0||this.position.y>s)&&(this.vector.y=-1.3*this.vector.y),i.forEach((function(e){if(r!==e&&(r.position.dist(e.position),r.diameter,e.diameter,r.position.dist(e.position)<(r.diameter+e.diameter)/2.1)){var t=e.position.copy().sub(r.position);r.vector.sub(t.mult(.2).setMag(1)),e.vector.add(t.mult(.2).setMag(1))}}));var n=2.4;this.vector.x>n&&(this.vector.x=n),this.vector.x<-2.4&&(this.vector.x=-2.4),this.vector.y>n&&(this.vector.y=n),this.vector.y<-2.4&&(this.vector.y=-2.4)}},{key:"toSize",value:function(e){this.diameter=e,this.matrix=w(this.color,this.diameter)}}]),r}(),f=function(){function e(t){Object(R.a)(this,e),this.position=t.position,this.diameter=4,this.color=t.color||"#fff",this.eaten=!1,this.matrix=w(this.color,this.diameter)}return Object(F.a)(e,[{key:"draw",value:function(){y(this.matrix,this.position)}}]),e}(),v=function(){function t(s){Object(R.a)(this,t),this.position=e.createVector(0,0),this.vector=e.createVector(0,0),this.acceleration=e.createVector(0,0),this.diameter=18,this.color="black",this.eatening=!1,this.eateningTimer=25,this.matrix=w(this.color,this.diameter)}return Object(F.a)(t,[{key:"draw",value:function(){y(this.matrix,this.position)}},{key:"update",value:function(){u.userColor!==this.color&&(this.color=u.userColor,this.matrix=w(this.color,this.diameter)),this.vector.add(this.acceleration),this.acceleration.mult(.9);var t=e.mouseX-this.position.x,s=e.mouseY-this.position.y,r=e.createVector(t,s);this.vector.add(r.setMag(180)).mult(.01),this.position.add(this.vector),m&&u.setUserPath((function(t){return[].concat(Object(A.a)(t),[{x:e.mouseX,y:e.mouseY}])}))}},{key:"toSize",value:function(e){this.diameter=e,this.matrix=w(this.color,this.diameter)}}]),t}(),x=function(){return e.createVector(e.random(0,t),e.random(0,s))},O=function(e,t,s){return function(e,t){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}(e,t)<=s},g=function(e,t,s){return O(e,t,s)&&!(O(e+1,t,s)&&O(e-1,t,s)&&O(e,t+1,s)&&O(e,t-1,s)&&O(e+1,t+1,s)&&O(e+1,t-1,s)&&O(e-1,t-1,s)&&O(e-1,t+1,s))},w=function(t,s){for(var r=Math.ceil(s/6)/2,i=e.lerpColor(e.color("black"),e.color(t),.6),n=e.lerpColor(e.color("black"),e.color(t),.66),a=e.lerpColor(e.color("black"),e.color(t),.9),o=t,c=e.lerpColor(e.color("white"),e.color(t),.9),l=e.lerpColor(e.color("white"),e.color(t),.8),u=2*r%2===0?2*Math.ceil(r-.5)+1:2*Math.ceil(r),h=[],d=0,p=-u/2+1;p<=u/2-1;p++){h[d]=[];for(var m=-u/2+1;m<=u/2-1;m++)O(m,p,r)?!g(m,p,r)||g(m+(m>0?1:-1),p,r)&&g(m,p+(p>0?1:-1),r)?O(m+2,p+2,1)?h[d].push(l):O(m+2,p+2,r-7)?e.random()<.3?h[d].push(l):h[d].push(c):O(m+2,p+2,r-6)?h[d].push(c):O(m+2,p+2,r-4)?e.random()<.3?h[d].push(c):h[d].push(o):O(m+1,p+1,r-3)?h[d].push(o):O(m+1,p+1,r-2)?e.random()<.3?h[d].push(o):h[d].push(a):O(m+1,p+1,r-1)?h[d].push(a):h[d].push(n):h[d].push(i):h[d].push(null);d++}return h},y=function(t,s){e.push(),e.translate(s.x,s.y);for(var r=0;r<t.length;r++)for(var i=0;i<t.length;i++)if(t[r][i]){var n=6*(i-t.length/2),a=6*(r-t.length/2);e.fill(t[r][i]),e.rect(n,a,6)}e.pop()}}var G=["#219EBC","#FFB703","#DC2F02","#560BAD"],H={userName:"",setUserName:function(){},userColor:"",setUserColor:function(){},userPlayedTime:-1,setUserPlayedTime:function(){},userPath:[],setUserPath:function(){}},V=Object(r.createContext)(H),$=function(e){var t=e.children,s=Object(r.useState)(""),i=Object(p.a)(s,2),n=i[0],a=i[1],o=Object(r.useState)(G[0]),l=Object(p.a)(o,2),u=l[0],h=l[1],d=Object(r.useState)(-1),m=Object(p.a)(d,2),j=m[0],b=m[1],f=Object(r.useState)([]),v=Object(p.a)(f,2),x={userName:n,setUserName:a,userColor:u,setUserColor:h,userPlayedTime:j,setUserPlayedTime:b,userPath:v[0],setUserPath:v[1]};return Object(c.jsx)(V.Provider,{value:x,children:t})},B=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),s=t[0],i=t[1],n=Object(r.useState)(0),a=Object(p.a)(n,2),o=(a[0],a[1]),l=Object(r.useContext)(V),u=l.userName,h=l.setUserName,m=l.userColor,j=l.setUserColor,b=l.userPlayedTime,f=l.setUserPlayedTime,x=(l.userPath,l.setUserPath);return Object(r.useEffect)((function(){f(0),x([])}),[]),Object(c.jsxs)("section",{className:"section-page game",children:[Object(c.jsx)(T,{mode:"game",time:b}),Object(c.jsx)(_.a,{sketch:z,clickedStart:s,setNumOfMarimos:o,time:b,setTime:f,setUserPath:x,userColor:m,isGameOver:function(){Object(d.c)(v.basepath+"/the-end")}}),s?null:Object(c.jsx)("div",{className:"modal-wrapper",children:Object(c.jsxs)("div",{className:"modal",children:[Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsx)("label",{children:"Select a color"}),Object(c.jsx)("div",{className:"select-items",children:G.map((function(e){return Object(c.jsx)("div",{style:{backgroundColor:e},onClick:function(){return j(e)},className:e===m?"select-item active":"select-item"})}))})]}),Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsx)("label",{children:"Enter your name"}),Object(c.jsx)("input",{defaultValue:u,onChange:function(e){return h(e.target.value)}})]}),Object(c.jsx)("div",{className:"btn-wrapper",children:Object(c.jsx)("a",{onClick:function(){return i(!0)},className:"btn btn-hl",children:"Ready"})})]})})]})};function W(e){var t=e.windowWidth,s=e.windowHeight,r={},i=0;e.myCustomRedrawAccordingToNewPropsHandler=function(e){r=e},e.setup=function(){e.createCanvas(t,s),e.noStroke(),i=0},e.draw=function(){e.fill(r.userColor),i<r.userPath.length&&(e.circle(r.userPath[i].x,r.userPath[i].y,3),i++)}}var J=function(){var e=Object(r.useContext)(V),t=(e.userName,e.setUserName,e.userColor),s=(e.setUserColor,e.userPlayedTime),i=(e.setUserPlayedTime,e.userPath);return Object(c.jsxs)("section",{className:"section-page the-end",children:[" ",Object(c.jsx)(T,{time:s}),i.length?Object(c.jsx)(_.a,{sketch:W,userPath:i,userColor:t}):null,Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("h1",{children:"Game Over"}),Object(c.jsx)(O,{to:"/game",className:"btn btn-hl",children:"Try Again"})]}),Object(c.jsx)(S,{})]})},L=v.basepath,Y=[{path:L+"/",Component:M},{path:L+"/about",Component:D},{path:L+"/rules",Component:I},{path:L+"/game",Component:B},{path:L+"/the-end",Component:J}],q=s(37),X=s(1),K=s(19),Q=s.n(K),Z=function(e){var t=e.children,s=e.path,r=i.a.useContext(j).dispatchTransitionType;return Object(c.jsx)(d.b,{path:s,children:function(e){var s=e.match;return Object(c.jsx)(q.a,{in:null!==s,appear:!0,mountOnEnter:!0,unmountOnExit:!0,addEndListener:function(e,t){null!==s?(r({type:"START_TRANSITION"}),o.a.to(e,{duration:.3,opacity:1,delay:.3,ease:X.b.easeInOut,onComplete:function(){r({type:m})}})):o.a.to(e,{opacity:0,duration:.3,ease:X.b.easeInOut,onComplete:function(){r({type:m}),t()}})},children:Object(c.jsx)("div",{id:"wrap",className:Q.a.TransitionMatchHOC,children:i.a.cloneElement(t,s)})})}})};var ee=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(l,{}),Object(c.jsx)($,{children:Object(c.jsx)(f,{children:Y.map((function(e,t){var s=e.path,r=e.Component;return Object(c.jsx)(Z,{path:s,children:Object(c.jsx)(r,{})},t+s)}))})})]})},te=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,38)).then((function(t){var s=t.getCLS,r=t.getFID,i=t.getFCP,n=t.getLCP,a=t.getTTFB;s(e),r(e),i(e),n(e),a(e)}))};a.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(ee,{})}),document.getElementById("root")),te()},7:function(e){e.exports=JSON.parse('{"name":"react-marimo-reverie","version":"0.1.0","private":true,"homepage":"http://chentingjuan.github.io/react-marimo-reverie","_homepage":"./","basepath":"/react-marimo-reverie","dependencies":{"@babel/core":"7.12.3","@pmmmwh/react-refresh-webpack-plugin":"0.4.3","@reach/router":"^1.3.4","@svgr/webpack":"5.5.0","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@typescript-eslint/eslint-plugin":"^4.5.0","@typescript-eslint/parser":"^4.5.0","babel-eslint":"^10.1.0","babel-jest":"^26.6.0","babel-loader":"8.1.0","babel-plugin-named-asset-import":"^0.3.7","babel-preset-react-app":"^10.0.0","bfj":"^7.0.2","camelcase":"^6.1.0","case-sensitive-paths-webpack-plugin":"2.3.0","css-loader":"4.3.0","dotenv":"8.2.0","dotenv-expand":"5.1.0","eslint":"^7.11.0","eslint-config-react-app":"^6.0.0","eslint-plugin-flowtype":"^5.2.0","eslint-plugin-import":"^2.22.1","eslint-plugin-jest":"^24.1.0","eslint-plugin-jsx-a11y":"^6.3.1","eslint-plugin-react":"^7.21.5","eslint-plugin-react-hooks":"^4.2.0","eslint-plugin-testing-library":"^3.9.2","eslint-webpack-plugin":"^2.5.2","file-loader":"6.1.1","fs-extra":"^9.0.1","gsap":"^3.6.1","html-webpack-plugin":"4.5.0","identity-obj-proxy":"3.0.0","jest":"26.6.0","jest-circus":"26.6.0","jest-resolve":"26.6.0","jest-watch-typeahead":"0.6.1","mini-css-extract-plugin":"0.11.3","node-sass":"^5.0.0","optimize-css-assets-webpack-plugin":"5.0.4","pnp-webpack-plugin":"1.6.4","postcss-flexbugs-fixes":"4.2.1","postcss-loader":"3.0.0","postcss-normalize":"8.0.1","postcss-preset-env":"6.7.0","postcss-safe-parser":"5.0.2","prompts":"2.4.0","react":"^17.0.2","react-app-polyfill":"^2.0.0","react-dev-utils":"^11.0.3","react-dom":"^17.0.2","react-p5-wrapper":"^2.4.0","react-refresh":"^0.8.3","react-transition-group":"^4.4.1","resolve":"1.18.1","resolve-url-loader":"^3.1.2","sass-loader":"^10.0.5","semver":"7.3.2","style-loader":"1.3.0","terser-webpack-plugin":"4.2.3","ts-pnp":"1.2.0","url-loader":"4.1.1","web-vitals":"^1.0.1","webpack":"4.44.2","webpack-dev-server":"3.11.1","webpack-manifest-plugin":"2.2.0","workbox-webpack-plugin":"5.1.4"},"scripts":{"start":"node scripts/start.js","build":"node scripts/build.js","test":"node scripts/test.js","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":["react-app","react-app/jest","plugin:react-pug/all"],"plugins":["react-pug"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"babel-plugin-transform-react-pug":"^7.0.1","eslint-plugin-react-pug":"^0.8.4","gh-pages":"^3.1.0"},"jest":{"roots":["<rootDir>/src"],"collectCoverageFrom":["src/**/*.{js,jsx,ts,tsx}","!src/**/*.d.ts"],"setupFiles":["react-app-polyfill/jsdom"],"setupFilesAfterEnv":["<rootDir>/src/setupTests.js"],"testMatch":["<rootDir>/src/**/__tests__/**/*.{js,jsx,ts,tsx}","<rootDir>/src/**/*.{spec,test}.{js,jsx,ts,tsx}"],"testEnvironment":"jsdom","testRunner":"/Users/juan/Projects/react-marimo-reverie/node_modules/jest-circus/runner.js","transform":{"^.+\\\\.(js|jsx|mjs|cjs|ts|tsx)$":"<rootDir>/config/jest/babelTransform.js","^.+\\\\.css$":"<rootDir>/config/jest/cssTransform.js","^(?!.*\\\\.(js|jsx|mjs|cjs|ts|tsx|css|json)$)":"<rootDir>/config/jest/fileTransform.js"},"transformIgnorePatterns":["[/\\\\\\\\]node_modules[/\\\\\\\\].+\\\\.(js|jsx|mjs|cjs|ts|tsx)$","^.+\\\\.module\\\\.(css|sass|scss)$"],"modulePaths":[],"moduleNameMapper":{"^react-native$":"react-native-web","^.+\\\\.module\\\\.(css|sass|scss)$":"identity-obj-proxy"},"moduleFileExtensions":["web.js","js","web.ts","ts","web.tsx","tsx","json","web.jsx","jsx","node"],"watchPlugins":["jest-watch-typeahead/filename","jest-watch-typeahead/testname"],"resetMocks":true},"babel":{"presets":["react-app"],"plugins":["transform-react-pug"]}}')}},[[34,1,2]]]);
//# sourceMappingURL=main.4eb22ba2.chunk.js.map